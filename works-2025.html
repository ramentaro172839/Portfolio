<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025年制作 - らーめん太郎 ファンアート ギャラリー</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="particles-js"></div>
    <header>
        <div class="container">
            <h1 class="site-title">らーめん太郎 ファンアート ギャラリー</h1>
            <nav>
                <ul>
                    <li><a href="index.html">トップ</a></li>
                    <li><a href="works.html">作品一覧</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section id="works" class="container">
            <div class="back-link">
                <a href="works.html" class="btn">← 作品一覧に戻る</a>
            </div>
            <h2>2025年制作 <span id="count-2025">(67作品)</span></h2>
             
             <div class="gallery" id="gallery-2025">
                 <!-- Gallery will be generated by JavaScript -->
             </div>
         </section>
     </main>
 
     <footer>
         <p>&copy; 2024 oz.</p>
     </footer>

     <!-- Modal for image viewing -->
     <div id="modal" class="modal">
         <span class="close">&times;</span>
         <img class="modal-content" id="modal-img">
         <div id="caption"></div>
     </div>
 
     <script>
         // DOMContentLoaded 後に JSON (files2025.json) を取得し、ギャラリーを生成
         document.addEventListener('DOMContentLoaded', () => {
             fetch('files2025.json')
                 .then(r => r.json())
                 .then(files => {
                     // 作品数を自動更新
                     document.getElementById('count-2025').textContent = `(${files.length}作品)`;
                     generateGallery(files);
                 })
                 .catch(err => console.error('❌ files2025.json の取得に失敗', err));
         });
/*            "latest_all_members_20250628064732.jpg",
            "HamCup_001_jaga_entrance_ceremony_20250403075653.png",
            "HamCup_001_jaga_entrance_ceremony_20250403075659.png",
            "HamCup_001_20250114083532.png",
            "HamCup_002_sakura_entrance_ceremony_20250403075840.png",
            "HamCup_002_sakura_entrance_ceremony_20250403075847.png",
            "HamCup_002_at_20250114083503.png",
            "HamCup_003_entrance_ceremony_20250404213435.png",
            "HamCup_003_entrance_ceremony_20250405070714.png",
            "HamCup_003_at_20250114083416.png",
            "HamCup_004_entrance_ceremony_20250405071315.png",
            "HamCup_004_entrance_ceremony_20250405071319.png",
            "HamCup_004_20231017_2139_20250114083317.png",
            "HamCup_005_entrance_ceremony_20250405072349.png",
            "HamCup_005_entrance_ceremony_20250405072359.png",
            "HamCup_005_at_20250114083327.png",
            "HamCup_006_entrance_ceremony_20250405202242.png",
            "HamCup_006_entrance_ceremony_20250405202414.png",
            "HamCup_006_at_20250114083308.png",
            "HamCup_007_entrance_ceremony_20250407081825.png",
            "HamCup_007_entrance_ceremony_20250407081835.png",
            "HamCup_007_20250513213243.png",
            "HamCup_007_at_20250114083242.png",
            "HamCup_008_ice_slugger_20250628070101.jpg",
            "HamCup_008_red_white_cap_shioppe_20250628070042.jpg",
            "HamCup_008_red_white_cap_ultraman_20250628070051.jpg",
            "HamCup_008_at_20250114083230.png",
            "HamCup_009_at_20250114083219.png",
            "HamCup_010_entrance_ceremony_20250628070131.jpg",
            "HamCup_010_at_20250114083207.png",
            "HamCup_011_entrance_ceremony_20250628070203.jpg",
            "HamCup_011_at_20250114083155.png",
            "HamCup_012_red_white_cap_ultraman_20250628070343.jpg",
            "HamCup_012_20250114083140.png",
            "HamCup_013_at_20250114083129.png",
            "HamCup_013_entrance_ceremony_hat_20250628070430.jpg",
            "HamCup_014_entrance_ceremony_20250628070415.jpg",
            "HamCup_014_entrance_ceremony_2_20250628070353.jpg",
            "HamCup_015_gijinka_20250112074356.png",
            "HamCup_015_entrance_ceremony_20250628070440.jpg",
            "HamCup_016_gijinka_20250114064233.png",
            "HamCup_016_entrance_ceremony_20250628070449.jpg",
            "HamCup_017_entrance_ceremony_20250628070457.jpg",
            "HamCup_018_gijinka_20250114094114.png",
            "HamCup_018_entrance_ceremony_20250628070506.jpg",
            "HamCup_019_gijinka_20250114184225.png",
            "HamCup_019_entrance_ceremony_20250628070516.jpg",
            "HamCup_020_gijinka_20250116070112.png",
            "HamCup_020_entrance_ceremony_20250628070526.jpg",
            "HamCup_021_gijinka_20250118201922.png",
            "HamCup_021_entrance_ceremony_20250628070534.jpg",
            "HamCup_022_gijinka_20250121074659.png",
            "HamCup_022_entrance_ceremony_20250628070544.jpg",
            "HamCup_023_gijinka_20250123073949.png",
            "HamCup_023_entrance_ceremony_20250628070552.jpg",
            "HamCup_024_gijinka_20250124085154.png",
            "HamCup_024_entrance_ceremony_20250628070602.jpg",
            "HamCup_025_gijinka_20250628073025.jpg",
            "HamCup_025_entrance_ceremony_20250502_2003_20250628070616.jpg",
            "HamCup_026_gijinka_20250127081113.png",
            "HamCup_026_entrance_ceremony_20250603070040.png",
            "HamCup_026_entrance_ceremony_20250628070627.jpg",
            "HamCup_027_gijinka_20250128173256.png",
            "HamCup_028_gijinka_20250129114519.png",
            "HamCup_029_gijinka_20250129234923.png",
            "HamCup_17_gijinka_20250114082928.png",
            "HamCup_entrance_ceremony_original_20250407141748.png",
            "HamCup_entrance_ceremony_original_20250407141806.png",
            "HamCup_entrance_ceremony_original_20250407174835.png",
            "ako_san_20250114083254.png",
            "ozu_and_ako_20250628063603.jpg",
            "ozu_san_red_white_cap_ultraman_ver_20250408184013.png",
            "ozu_san_red_white_cap_normal_ver_20250408185239.png",
            "toraineko_san_regent_20250114083336.png",
            "toraineko_san_20240302_2206_20250114083059.png",
            "torikara_entrance_ceremony_20250404073218.png",
            "torikara_entrance_ceremony_20250404073228.png",
            "black_ma_20250403081926.png",
            "black_ma_20250403081938.png",
            "hareko_san_20250114083522.png",
            "graduation_1st_sheet_20250315084835.png",
            "fukumen_taro_20240211_2109_20250628063624.jpg",
            "untitled_250_20230912_2314_20250330092205.png",
            "untitled_314_20250513224122.png",
            "untitled_481_20250626214124.jpg",
            "untitled_493_20250108173159.png",
            "untitled_495_20250115230213.png",
            "untitled_505_20250628065945.jpg",
            "untitled_508_20250628065952.jpg",
            "untitled_510_20250510165343.png",
            "untitled_524_20250315084250.png",
            "untitled_526_20250318074955.png",
            "untitled_536_20250401064942.png"
         */

         // ギャラリーを動的に生成
         function generateGallery(files) {
             const gallery = document.getElementById('gallery-2025');
             let loadedCount = 0;
             let hiddenCount = 0;
             
             files.forEach(fileName => {
                 const galleryItem = document.createElement('div');
                 galleryItem.className = 'gallery-item';
                 
                 const img = document.createElement('img');
                 // 画像2フォルダーにある画像かチェック
                 const image2Files = [
                     'HamCup#001_20250114083532.png',
                     'HamCup#003@_20250114083416.png',
                     'HamCup#005@_20250114083327.png',
                     'HamCup#006@_20250114083308.png',
                     'HamCup#009@_20250114083219.png',
                     'HamCup#010@_20250114083207.png',
                     'HamCup#011@_20250114083155.png',
                     'HamCup#012_20250114083140.png',
                     'HamCup#018擬人化_20250114094114.png',
                     'HamCup#019 擬人化_20250114184225.png',
                     'HamCup#020 擬人化_20250116070112.png',
                     'HamCup#021 擬人化_20250118201922.png',
                     'HamCup#022 擬人化_20250121074659.png',
                     'HamCup#023 擬人化_20250123073949.png',
                     'HamCup#024 擬人化_20250124085154.png',
                     'HamCup#025 擬人化_20250628073025.jpg',
                     'HamCup#026 擬人化_20250127081113.png',
                     'HamCup#028 擬人化_20250129114519.png',
                     'HamCup#17 擬人化_20250114082928.png',
                     'HamCup擬人化全員集合_20250628065929.jpg',
                     'オズ&ほんてぃ 握手_20250621101920.png',
                     '無題602_20250621090909.png',
                     '無題603_20250621101541.png',
                     '無題603.2025.06.21-10.06_20250621102733.png',
                     'HamCup通信No.900号_20250624215413.png',
                     '無題492_20250628065915.jpg',
                     '無題508_20250628065952.jpg'
                 ];
                 
                 if (image2Files.includes(fileName)) {
                     img.src = `画像2/${encodeURIComponent(fileName)}`;
                 } else {
                     img.src = `画像/${encodeURIComponent(fileName)}`;
                 }
                 img.alt = fileName;
                 
                 img.onload = function() {
                     loadedCount++;
                     console.log(`✅ Loaded: ${fileName} (${loadedCount}/${files.length})`);
                 };
                 
                 img.onerror = function() {
                     console.log(`❌ Failed to load: ${fileName}`);
                     // Try with encoded URL
                     const encodedFileName = encodeURIComponent(fileName);
                     if (image2Files.includes(fileName)) {
                         this.src = `画像2/${encodedFileName}`;
                     } else {
                         this.src = `画像/${encodedFileName}`;
                     }
                     
                     this.onerror = function() {
                         console.log(`❌ Failed to load even with encoding: ${fileName}`);
                         galleryItem.style.display = 'none';
                         hiddenCount++;
                         console.log(`🚫 Hidden ${hiddenCount} items so far`);
                     };
                 };
                 
                 // クリック時のモーダル表示機能を追加
                 img.onclick = function() {
                     const modal = document.getElementById('modal');
                     const modalImg = document.getElementById('modal-img');
                     const captionText = document.getElementById('caption');
                     
                     if (modal && modalImg && captionText) {
                         modal.style.display = "block";
                         modalImg.src = this.src;
                         captionText.innerHTML = ""; // キャプションを空にする
                     }
                 };
                 
                 galleryItem.appendChild(img);
                 gallery.appendChild(galleryItem);
             });
            
            // Update count after 3 seconds (実際に表示された作品数に更新)
            setTimeout(() => {
                const actualCount = files.length - hiddenCount;
                document.getElementById('count-2025').textContent = `(${actualCount}作品)`;
                console.log(`📊 Final count: ${actualCount} displayed, ${hiddenCount} hidden`);
            }, 3000);
         }

         // ページ読み込み後にギャラリーを生成
         // window.onload での呼び出しは不要 (fetch 内で実行)
         
         // モーダルを閉じる機能
         document.addEventListener('DOMContentLoaded', () => {
             const modal = document.getElementById('modal');
             const span = document.getElementsByClassName("close")[0];
             
             if (span) {
                 span.onclick = function() { 
                     if (modal) modal.style.display = "none";
                 }
             }
             
             // モーダル外をクリックしたときも閉じる
             window.onclick = function(event) {
                 if (event.target == modal) {
                     if (modal) modal.style.display = "none";
                 }
             }
         });
     </script>
</body>
</html>